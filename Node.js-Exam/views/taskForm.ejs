<%- include('layout/navbar', { user: user }) %>

    <div class="auth-container">
        <div class="auth-card" style="max-width: 600px;">
            <h2>
                <%= task ? 'Edit Task' : 'Create New Task' %>
            </h2>
            <form action="<%= task ? '/tasks/update/' + task._id : '/tasks' %>" method="POST">
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" name="title" class="form-control" value="<%= task ? task.title : '' %>" required>
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea name="description" class="form-control"
                        rows="4"><%= task ? task.description : '' %></textarea>
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select name="category" class="form-control">
                        <option value="">Select Category</option>
                        <% categories.forEach(cat=> { %>
                            <option value="<%= cat._id %>" <%=task && task.category &&
                                task.category.toString()===cat._id.toString() ? 'selected' : '' %>>
                                <%= cat.name %>
                            </option>
                            <% }) %>
                    </select>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select name="status" class="form-control">
                        <option value="pending" <%=task && task.status==='pending' ? 'selected' : '' %>>Pending</option>
                        <option value="in-progress" <%=task && task.status==='in-progress' ? 'selected' : '' %>>In
                            Progress</option>
                        <option value="completed" <%=task && task.status==='completed' ? 'selected' : '' %>>Completed
                        </option>
                    </select>
                </div>
                <button type="submit" class="btn-primary btn-block">
                    <%= task ? 'Update Task' : 'Create Task' %>
                </button>
                <a href="/tasks"
                    style="display: block; text-align: center; margin-top: 15px; color: var(--text-muted); text-decoration: none; font-size: 14px;">Cancel</a>
            </form>
        </div>
    </div>

    </body>

    </html>